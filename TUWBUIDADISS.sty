%% 
%% Template for dissertation and diploma thesis 
%% at the faculty of civil engineering, TU Wien
%% 
%% Created 2024-06-14
%% Christian Schranz, Sebastian Pech
%% tested for pdflatex
%% 
\ProvidesPackage{TUWBUIDADISS}[2022/09/01]

\addtokomafont{captionlabel}{\bfseries}

\KOMAoptions{chapterprefix=true}
\KOMAoptions{parskip=false,headinclude=true,
  captions=tableheading,numbers=noenddot}

\setlength{\parindent}{0pt}
\setlength{\parskip}{5pt}

\renewcommand*{\chaptermarkformat}{%
  \thechapter\autodot\enskip%
}  % no "Chapter" (or "Kapitel" in header)

\usepackage[most]{tcolorbox}


\RequirePackage[T1]{fontenc}
\RequirePackage{lmodern}
\RequirePackage[babel]{microtype}     % improves the micro-typographic layout
\RequirePackage[english,ngerman]{babel} %% englisch and austrian language
\PassOptionsToPackage{table}{xcolor}
% \RequirePackage{xcolor} %% improvement to the color package, included by pdfx 
% muss jetzt vor pdfx geladen werden


%% Package pdfx derzeit fehlerhaft implementiert ... daher pdfx auskommentiert und stattdessen hyperref geladen

\input{glyphtounicode.tex}    %Part of modern distribution
\input{glyphtounicode-cmr.tex}     %Additionnal glyph: You must grab it from pdfx package
\pdfgentounicode=1
\pdfinterwordspaceon
%\RequirePackage[a-2u,pdf17]{pdfx}
\pdfomitcharset 1
\RequirePackage{colorprofiles}
\RequirePackage{cmap}
\RequirePackage{hyperref}
\hypersetup{ % Setzt einige Werte die in den Eigenschaften des PDF gespeichert sind.
  bookmarksnumbered,
  %   % pdfdisplaydoctitle = true,
  colorlinks, % Für Druck auf "false" setzen!
  linkcolor={black}, % auch keine grellen Rahmen im View
  citecolor={black},
  urlcolor={black}
}

%% lines at - see: http://www.komascript.de/chapterwithlines
%\renewcommand{\chapterlineswithprefixformat}[3]{%
%  {\raggedleft #2}\nobreak
%  \rule[.5\baselineskip]{\textwidth}{1pt}\\*
%  #3\par\nobreak
%  \rule[-.5\baselineskip]{\textwidth}{1pt}%
%}
%% Linien bei Überschriften - Ende

%% Absatzkontrolle
\clubpenalty10000
\widowpenalty10000
\displaywidowpenalty=10000

\RequirePackage{graphicx}

%% 2 definitions of margins - choose the one you like
%% new definitions of margins - variant 1
\RequirePackage[left=2.5cm,right=2.5cm,top=2.0cm,bottom=3.0cm,includehead]{geometry}
%%
%% new definitions of page size - variant 2
%% Bindekorrektur=10mm, textwidth=155mm, textheight=242mm
%%\areaset[10mm]{160mm}{247mm} 

%% header and foot
\RequirePackage[
  headsepline,
  automark
]{scrlayer-scrpage}

\pagestyle{scrheadings}
\clearpairofpagestyles
\ihead{\headmark}
\ohead{\thepage}
%\cfoot{\thepage}

\RequirePackage{setspace}

\RequirePackage[absolute]{textpos} %% for positioning the tu-logo

\RequirePackage[list=true]{subcaption}

\RequirePackage{mathtools} %% extension of amsmath (also loads amstext)
\RequirePackage{amssymb}   %% for complex formulas
%Correct UTF8 mapping for ams fonts
\ifdefined\pdffontattr% \ifdefined is part of the e-TeX extension, which is part of any modern LaTeX compiler.
  \immediate\pdfobj stream file {umsa.cmap}
    {\usefont{U}{msa}{m}{n}\pdffontattr\font{/ToUnicode \the\pdflastobj\space 0 R}}
  \immediate\pdfobj stream file {umsb.cmap}
    {\usefont{U}{msb}{m}{n}\pdffontattr\font{/ToUnicode \the\pdflastobj\space 0 R}}
\fi
\RequirePackage{xfrac}  %% diagonals fractions - e.g. numbers
\RequirePackage{siunitx} %% SI Units

\RequirePackage{booktabs} %% for better looking tables 

\RequirePackage{ragged2e,tabularx}
\RequirePackage{longtable}
\RequirePackage[para,flushleft]{threeparttable}
\RequirePackage{multirow}

\RequirePackage{url} %% links inside the document as well as to websites

\RequirePackage{pdfpages} %% to include pdf pages

\RequirePackage{textcomp} %% additional symbols
\RequirePackage{marvosym} %% additional symbols
\RequirePackage{pifont}   %% additional symbols
\RequirePackage{eurosym} %% for correct Euro-Symbol with \officialeuro{}

\RequirePackage[babel,austrian=quotes,english=american]{csquotes}   %% context sensitives quotations

\RequirePackage{xspace}  %% for intelligent spacing after commands \xspace

\RequirePackage{enumitem}  %% to customize itemize, enumerate, description

\RequirePackage{listings} %% syntax highlighting - for program code

% Eigene Sprachabhängige Begriffe
\renewcaptionname{ngerman}{\tablename}{Tab.}
\renewcaptionname{ngerman}{\figurename}{Abb.}
\renewcaptionname{ngerman}{\bibname}{Literaturverzeichnis}
\renewcaptionname{ngerman}{\abstractname}{Kurzfassung}

\renewcaptionname{english}{\tablename}{Tab.}
\renewcaptionname{english}{\figurename}{Fig.}

%% Typografische Einstellungen zu Gleitobjekten
\renewcommand{\floatpagefraction}{0.6}
\renewcommand{\textfraction}{0.15}
\renewcommand{\topfraction}{0.8}
\renewcommand{\bottomfraction}{0.5}
\setcounter{topnumber}{3}
\setcounter{totalnumber}{5}


%% Customize Listing
\lstset{
  basicstyle = \footnotesize\ttfamily,
  keywordstyle=\color{blue}\bfseries,
  tabsize=3,
  breaklines=true,
  showstringspaces = false,
  upquote = true,
  xleftmargin=4mm,
  xrightmargin=.25in,
  aboveskip=15pt,
  belowskip=12pt,
  belowcaptionskip=12pt,
  numbers=left,
  numberstyle=\tiny,
  frame=tb,
  moredelim=**[is][\color{blue}]{@}{@}
}
\lstset{literate=%
  {Ö}{{\"O}}1
{Ä}{{\"A}}1
{Ü}{{\"U}}1
{ß}{{\ss}}1
{ü}{{\"u}}1
{ä}{{\"a}}1
{ö}{{\"o}}1
}
\renewcommand{\lstlistingname}{Program Code}

%%
%% Customize Titlepage for Department of Civil Engineering
%%
\RequirePackage{ifthen}

\newcommand{\titleDAen}[1]{
{\large \textsc{Lab Report}}
\\[3ex]
{\LARGE \textbf{#1
}
\\[3.5ex]}
{\large
Building a PKI with root, intermediate, and TLS server certificates including revocation testing and TLS connection verification
\\[1ex]
\textsc{Exercise 01}
}}

\newcommand{\titleDAde}[1]{
{\large \textsc{Laborprotokoll}}
\\[3ex]
{\LARGE \textbf{#1}
\\[3.5ex]}
{
Aufbau einer PKI mit Root-, Intermediate- und TLS-Server-Zertifikat inklusive Revokationtest sowie Prüfung der TLS-Verbindung
\\[1ex]
\textsc{Übung 01}
}}

\newcommand{\titleDISSen}[1]{{\large PhD Thesis} \\[3ex]
{\LARGE \textbf{#1
}
\\[3.5x]}
{\large
Intelligent Safety \& Monitoring System
\\[1ex]
-
\\[1ex]
submitted to IT-HTL Ybbs, Higher Technical Institute for Information T
}}

\newcommand{\titleDISSde}[1]{{\large Dissertation}
\\[3ex]
{\LARGE \textbf{#1}
\\[3.0ex]}
{\large
ausgeführt zum Zwecke der Erlangung des akademischen Grads
\\[1ex]
\ifthenelse{\equal{\gender}{M}}{Doktor der technischen Wissenschaften}{Doktorin der technischen Wissenschaften}
\\[1ex]
eingereicht an der TU Wien, Fakultät für Bau- und Umweltingenieurwesen
}}

\renewcommand{\maketitle}{%
  \begin{titlepage}
    %
    \begin{textblock*}{4cm}(157mm,7mm)
      \includegraphics[width=4cm]{./htl-logo.pdf}
    \end{textblock*}

    \begin{singlespace*}
      \begin{center}
        \ifthenelse{\equal{\thesistype}{DISS}}
        {\ifthenelse{\equal{\thesislanguage}{de-AT}}{\titleDISSde{\thesistitle}}{\titleDISSen{\thesistitle}}}
        {\ifthenelse{\equal{\thesislanguage}{de-AT}}{\titleDAde{\thesistitle}}{\titleDAen{\thesistitle}}}
        \\[1.5ex]
        \rule{\linewidth}{0.2mm}
        \\[1.5ex]
        \ifthenelse{\equal{\thesistype}{DISS}}
        {\ifthenelse{\equal{\thesislanguage}{de-AT}}{\titleDISSen{\thesistitletranslated}}{\titleDISSde{\thesistitletranslated}}}
        {\ifthenelse{\equal{\thesislanguage}{de-AT}}{\titleDAen{\thesistitletranslated}}{\titleDAde{\thesistitletranslated}}}
        \\[10ex]

      \end{center}

      \vfill

      \noindent
      \begin{minipage}[t]{0.48\textwidth}
        \flushleft
        \textbf{Ausgeführt im Schuljahr 2025/26 von:}\\[0.5em]
        Haselsteiner Matteo \hfill 5AHITN\\
      \end{minipage}
      \hfill
      \begin{minipage}[t]{0.48\textwidth}
        \flushright
        \textbf{Klasse/Gruppe}\\[0.5em]
        5AHITN\\
        Gruppe 2\\[1.5em]
        \textbf{Übungsdatum}\\[0.5em]
        24.09.2025
      \end{minipage}

      \vspace{2cm} % Abstand vor unterer Zeile

      \begin{center}
        \makebox[\textwidth][s]{\large Ybbs an der Donau, 15.10.2025\hfill \rule{5cm}{0.4pt}}
      \end{center}


    \end{singlespace*}



  \end{titlepage}}
%%
%% end customizing title page
%%
